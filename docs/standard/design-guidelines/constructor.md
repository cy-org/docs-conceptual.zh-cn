---
title: "构造函数设计 | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "成员设计准则，构造函数"
  - "构造函数，设计准则"
  - "实例构造函数"
  - "类型构造函数"
  - "虚拟成员"
  - "类型的构造函数"
  - "默认构造函数"
  - "静态构造函数"
ms.assetid: b4496afe-5fa7-4bb0-85ca-70b0ef21e6fc
caps.latest.revision: 12
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 12
---
# 构造函数设计
有两种类型的构造函数︰ 键入构造函数和实例构造函数。  
  
 类型构造函数是静态的而且之前使用的类型的 CLR 运行。 实例构造函数运行时创建的一种类型的实例。  
  
 类型构造函数不能采用任何参数。 实例构造函数可以。 不带任何参数的实例构造函数通常称为默认构造函数。  
  
 构造函数是最普遍的方法来创建一种类型的实例。 大多数开发人员将搜索，然后尝试使用一个构造函数，然后他们考虑使用其他方法的创建 （如工厂方法） 的实例。  
  
 **✓ 请考虑** 提供很简单，理想情况下默认值，构造函数。  
  
 简单的构造函数具有极少数的参数，并且所有参数都是基元或枚举。 这种简单的构造函数提高可用性的 framework。  
  
 **✓ 请考虑** 而不一个构造函数使用静态工厂方法，如果所需的操作的语义执行不直接映射到在构造的新实例，或遵循设计准则并构造函数是不合理。  
  
 **✓ 执行** 使用构造函数参数作为快捷方式来设置主属性。  
  
 应在语义之间没有区别使用跟某些属性集的空构造函数和使用具有多个参数的构造函数。  
  
 **✓ 执行** 使用构造函数参数和属性相同的名称，如果使用构造函数参数则只需设置的属性。  
  
 此类参数和属性的唯一区别应该大小写不同。  
  
 **✓ 执行** 构造函数中的最少的工作量。  
  
 构造函数不应执行捕获以外的工作量有多大的构造函数参数。 应延迟成本的任何其他处理，直到需要。  
  
 **✓ 执行** 从引发异常，实例构造函数，如果合适。  
  
 **✓ 执行** 显式声明在类中，公共默认构造函数，如果这样的构造函数是必需的。  
  
 如果在一种类型上，不显式声明任何构造函数，许多语言 （如 C\# 中\) 将自动添加公共默认构造函数。 （抽象类获取受保护的构造函数。）  
  
 向类中添加参数化构造函数可以阻止编译器添加默认构造函数。 这通常会导致意外的重大更改。  
  
 **X 避免** 显式定义结构的默认构造函数。  
  
 这使得数组创建速度更快，因为如果未定义的默认构造函数，它不必在数组中每个插槽上运行。 请注意，许多编译器，包括 C\# 中，不允许结构出于此原因具有无参数构造函数。  
  
 **X 避免** 在其构造函数内的对象上调用虚拟成员。  
  
 即使派生程度最高的类型的构造函数已完全尚未运行，则调用虚拟成员将导致要调用的派生程度最大重写。  
  
### 类型构造函数准则  
 **✓ 执行** 使静态构造函数成为私有。  
  
 静态构造函数，也称为类构造函数，用于初始化的类型。 在创建该类型的第一个实例或调用该类型上的任何静态成员之前，CLR 将调用该静态构造函数。 用户还可以通过调用静态构造函数时不控制。 如果静态构造函数不是私有的则可以调用 CLR 以外的代码。 根据构造函数中执行的操作，这可能导致意外的行为。 C\# 编译器强制静态构造函数为私有。  
  
 **X 不** 从静态构造函数引发异常。  
  
 如果从类型构造函数引发异常，该类型不适合于当前的应用程序域中。  
  
 **✓ 请考虑** 初始化以内的静态字段，而不是显式使用静态构造函数，因为运行时能够优化没有显式定义的静态构造函数的类型的性能。  
  
 *部分 © 2005年、 2009 Microsoft Corporation。 保留所有权利。*  
  
 *转载已获得的权限从 Pearson Education，Inc. [Framework 设计准则︰ 约定、 惯例和可重用的.NET 库，第二版模式](http://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) 通过 Krzysztof Cwalina 和 Brad Abrams，作为 Microsoft Windows 开发系列的一部分发布 2008 年 10 月 22 日由 Addison\-wesley Professional。*  
  
## 请参阅  
 [成员设计准则](../../../docs/standard/design-guidelines/member.md)   
 [Framework 设计准则](../../../docs/standard/design-guidelines/index.md)